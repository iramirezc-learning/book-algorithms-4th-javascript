#!/usr/bin/env node
const { TwoSumFast } = require('../js/lib')
const { File } = require('../js/util')

/**
 * TwoSumFast test client.
 * @see p.189
 */
class TwoSumFastClient {
  /**
   * Counts the non-duplicated pairs that sum to 0.
   * @param {string} file The name of the file.
   *
   * @example <caption>1K ints</caption>
   * ```sh
   * $ ./TwoSumFast data/1Kints.txt
   * 1
   * ```
   *
   * @example <caption>2K ints</caption>
   * ```sh
   * $ ./TwoSumFast data/2Kints.txt
   * 2
   * ```
   *
   * @example <caption>4K ints</caption>
   * ```sh
   * $ ./TwoSumFast data/4Kints.txt
   * 3
   * ```
   *
   * @example <caption>8K ints</caption>
   * ```sh
   * $ ./TwoSumFast data/8Kints.txt
   * 19
   * ```
   *
   * @example <caption>1M ints</caption>
   * ```sh
   * $ ./TwoSumFast data/1Mints.txt
   * 249838
   * ```
   */
  static run(file) {
    const input = new File(file)
    const a = input.readAllInts()

    console.log(TwoSumFast.count(a))
  }

  /**
   * Main execution.
   * @param {Array<string>} args Arguments form the command line.
   */
  static main(args) {
    const file = args[0]

    this.run(file)
  }
}

TwoSumFastClient.main(process.argv.slice(2))
